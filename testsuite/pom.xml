<project xmlns="http://maven.apache.org/POM/4.0.0" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    
    <parent>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core-parent</artifactId>
        <version>1</version>
    </parent>
    
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-testsuite</artifactId>
    <version>3.3.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>Hibernate Testsuite</name>
    <description>The testsuite of Hibernate functionality</description>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
        </dependency>
        <dependency>
            <groupId>${groupId}</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${version}</version>
        </dependency>
        <dependency>
            <groupId>${groupId}</groupId>
            <artifactId>hibernate-testing</artifactId>
            <version>${version}</version>
        </dependency>
        <dependency>
            <groupId>${groupId}</groupId>
            <artifactId>hibernate-ehcache</artifactId>
            <version>${version}</version>
        </dependency>
        <dependency>
            <groupId>${groupId}</groupId>
            <artifactId>hibernate-jbosscache</artifactId>
            <version>${version}</version>
        </dependency>
        <dependency>
            <groupId>${groupId}</groupId>
            <artifactId>hibernate-oscache</artifactId>
            <version>${version}</version>
        </dependency>
        <dependency>
            <groupId>${groupId}</groupId>
            <artifactId>hibernate-swarmcache</artifactId>
            <version>${version}</version>
        </dependency>
        <!-- these are optional on core... :( -->
        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.4.GA</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.1_3</version>
        </dependency>
        <dependency>
            <groupId>asm</groupId>
            <artifactId>asm-attrs</artifactId>
            <version>1.5.3</version>
        </dependency>
        <!-- optional dom4j dependency; needed here for dom4j (de)serialization -->
        <dependency>
            <groupId>jaxen</groupId>
            <artifactId>jaxen</artifactId>
            <version>1.1</version>
        </dependency>
    </dependencies>

    <build>
        <testResources>
            <testResource>
                <filtering>false</filtering>
                <directory>src/test/java</directory>
                <includes>
                    <include>**/*.xml</include>
                </includes>
            </testResource>
            <testResource>
                <filtering>false</filtering>
                <directory>src/test/resources</directory>
            </testResource>
        </testResources>

        <plugins>
            <plugin>
                <groupId>org.jboss.maven.plugins</groupId>
                <artifactId>maven-test-ext-plugin</artifactId>
                <version>1.1.0</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>extend</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <systemProperties>
                        <property>
                            <name>hibernate.test.validatefailureexpected</name>
                            <value>true</value>
                        </property>
                    </systemProperties>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <!-- Set up profiles defining test environments -->
    <profiles>
        <!-- HSQLDB is the default (eventually move to H2) -->
        <profile>
            <id>hsqldb</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <dependencies>
                <dependency>
                    <groupId>hsqldb</groupId>
                    <artifactId>hsqldb</artifactId>
                    <version>1.8.0.2</version>
                </dependency>
            </dependencies>
            <build>
                <testResources>
                    <testResource>
                        <directory>${basedir}/src/test/profile/hsqldb</directory>
                        <filtering>false</filtering>
                        <includes>
                            <include>hibernate.properties</include>
                        </includes>
                    </testResource>
                </testResources>
            </build>
        </profile>

        <!-- The H2 test envionment -->
        <profile>
            <id>h2</id>
            <dependencies>
                <dependency>
                    <groupId>org.h2database</groupId>
                    <artifactId>h2database</artifactId>
                    <version>1.0.20061217</version>
                </dependency>
            </dependencies>
            <build>
                <testResources>
                    <testResource>
                        <directory>${basedir}/src/test/profile/h2</directory>
                        <filtering>false</filtering>
                        <includes>
                            <include>hibernate.properties</include>
                        </includes>
                    </testResource>
                </testResources>
            </build>
        </profile>

        <!--
            Profiles naming db instances in the Red Hat QA/QE lab
        -->

        <!-- The MySQL5 test envionment -->
        <profile>
            <id>mysql5</id>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.0.5</version>
                </dependency>
            </dependencies>
            <build>
                <testResources>
                    <testResource>
                        <directory>${basedir}/src/test/profile/rh-qa/mysql5</directory>
                        <filtering>false</filtering>
                        <includes>
                            <include>hibernate.properties</include>
                        </includes>
                    </testResource>
                </testResources>
            </build>
        </profile>

        <!-- The PostgreSQL test envionment -->
        <profile>
            <id>pgsql8</id>
            <dependencies>
                <dependency>
                    <groupId>postgresql</groupId>
                    <artifactId>postgresql</artifactId>
                    <version>8.2-504</version>
                    <classifier>jdbc3</classifier>
                </dependency>
            </dependencies>
            <build>
                <testResources>
                    <testResource>
                        <directory>${basedir}/src/test/profile/rh-qa/pgsql8</directory>
                        <filtering>false</filtering>
                        <includes>
                            <include>hibernate.properties</include>
                        </includes>
                    </testResource>
                </testResources>
            </build>
        </profile>

        <!-- The Oracle9i test envionment -->
        <profile>
            <id>oracle9i</id>
            <dependencies>
                <dependency>
                    <groupId>com.oracle</groupId>
                    <artifactId>ojdbc14</artifactId>
                    <!-- use the 10g drivers which are surprisingly largely bug free -->
                    <version>10.0.2.0</version>
                </dependency>
            </dependencies>
            <build>
                <testResources>
                    <testResource>
                        <directory>${basedir}/src/test/profile/rh-qa/oracle9i</directory>
                        <filtering>false</filtering>
                        <includes>
                            <include>hibernate.properties</include>
                        </includes>
                    </testResource>
                </testResources>
            </build>
        </profile>

        <!-- The Oracle10g test envionment -->
        <profile>
            <id>oracle10g</id>
            <dependencies>
                <dependency>
                    <groupId>com.oracle</groupId>
                    <artifactId>ojdbc14</artifactId>
                    <!-- use the 10g drivers which are surprisingly largely bug free -->
                    <version>10.0.2.0</version>
                </dependency>
            </dependencies>
            <build>
                <testResources>
                    <testResource>
                        <directory>${basedir}/src/test/profile/rh-qa/oracle10g</directory>
                        <filtering>false</filtering>
                        <includes>
                            <include>hibernate.properties</include>
                        </includes>
                    </testResource>
                </testResources>
            </build>
        </profile>

        <!-- The DB2 8.x test envionment -->
        <profile>
            <id>db2-8</id>
            <dependencies>
                <dependency>
                    <groupId>com.ibm</groupId>
                    <artifactId>ojdbc14</artifactId>
                    <version>10.0.2.0</version>
                </dependency>
            </dependencies>
            <build>
                <testResources>
                    <testResource>
                        <directory>${basedir}/src/test/profile/rh-qa/db2-8</directory>
                        <filtering>false</filtering>
                        <includes>
                            <include>hibernate.properties</include>
                        </includes>
                    </testResource>
                </testResources>
            </build>
        </profile>

        <!-- The Sybase 12 test envionment -->
        <profile>
            <id>sybase12</id>
            <dependencies>
                <dependency>
                    <groupId>com.sybase</groupId>
                    <artifactId>jconnect</artifactId>
                    <version>6.0.5</version>
                </dependency>
            </dependencies>
            <build>
                <testResources>
                    <testResource>
                        <directory>${basedir}/src/test/profile/rh-qa/sybase12</directory>
                        <filtering>false</filtering>
                        <includes>
                            <include>hibernate.properties</include>
                        </includes>
                    </testResource>
                </testResources>
            </build>
        </profile>

        <!-- The SQLServer2005 (jTDS) test envionment -->
        <profile>
            <id>sqlserver-jtds</id>
            <dependencies>
                <dependency>
                    <groupId>net.sourceforge.jtds</groupId>
                    <artifactId>jtds</artifactId>
                    <version>1.2</version>
                </dependency>
            </dependencies>
            <build>
                <testResources>
                    <testResource>
                        <directory>${basedir}/src/test/profile/rh-qa/sqlserver2005/jtds</directory>
                        <filtering>false</filtering>
                        <includes>
                            <include>hibernate.properties</include>
                        </includes>
                    </testResource>
                </testResources>
            </build>
        </profile>

        <!-- The SQLServer2005 (MS JDBC) test envionment -->
        <profile>
            <id>sqlserver-msjdbc</id>
            <dependencies>
                <dependency>
                    <groupId>com.microsoft.sqlserver</groupId>
                    <artifactId>msjdbc</artifactId>
                    <version>1.1</version>
                </dependency>
            </dependencies>
            <build>
                <testResources>
                    <testResource>
                        <directory>${basedir}/src/test/profile/rh-qa/sqlserver2005/msjdbc</directory>
                        <filtering>false</filtering>
                        <includes>
                            <include>hibernate.properties</include>
                        </includes>
                    </testResource>
                </testResources>
            </build>
        </profile>

    </profiles>

</project>
